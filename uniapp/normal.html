<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <script src="bundle.js"></script>
  </head>
  <body>
    <h1 id="info">Loading...</h1>
    <script>
      subInitKeyring().then(() => {
        console.log('init keyring done');

        let testAccount = subNewAccount('abc', 'abc');
        console.log('unlock account');
        subUnlock(testAccount.json.address, 'abc');
        console.log('addre:', testAccount.json.address);

        console.log('start sign');
        let obj = JSON.parse(
          '{"account":"5Fe1ycrky9cggGuyTP9jqLmq1PsoWnnLn11gseyUMhdsAiHW","app_id":"100000001","cycle":"678","exchange_amount":"0.01"}'
        );
        let sign = signParams('AppIncomeRedeemParams', obj, testAccount.json.address);
        console.log('sign:', sign);

        /*subInitApi('ws://39.106.116.92:9944').then(() => {
          queryAppFinancedUserPortion(
            '5Fe1ycrky9cggGuyTP9jqLmq1PsoWnnLn11gseyUMhdsAiHW',
            '100000001',
            '1608971556000'
          ).then((result) => {
            console.log('result:', result);
          });
        });*/
      });
    </script>
  </body>
</html>
